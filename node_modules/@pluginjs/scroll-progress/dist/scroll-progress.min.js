/*!
 * @pluginjs/scroll-progress v0.7.18 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@pluginjs/component"),require("@pluginjs/template"),require("@pluginjs/factory"),require("@pluginjs/classes"),require("@pluginjs/styled"),require("@pluginjs/events"),require("@pluginjs/dom"),require("@pluginjs/decorator")):"function"==typeof define&&define.amd?define(["@pluginjs/component","@pluginjs/template","@pluginjs/factory","@pluginjs/classes","@pluginjs/styled","@pluginjs/events","@pluginjs/dom","@pluginjs/decorator"],e):(t=t||self)["@pluginjs/scroll-progress"]=e(t["@pluginjs/component"],t["@pluginjs/template"],t["@pluginjs/factory"],t["@pluginjs/classes"],t["@pluginjs/styled"],t["@pluginjs/events"],t["@pluginjs/dom"],t["@pluginjs/decorator"])}(this,(function(t,e,i,s,n,o,r,l){"use strict";function a(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t,e,i){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(s){var n=Object.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e,i=i&&i.hasOwnProperty("default")?i.default:i;var d,f={READY:"ready",ENABLE:"enable",DISABLE:"disable",DESTROY:"destroy",REFRESH:"refresh"},b={NAMESPACE:"pj-".concat("scrollProgress"),BAR:"{namespace}-bar",DISABLED:"{namespace}-disabled"},g=["top-left","top-right","bottom-left","bottom-right","left-bottom","left-top","right-bottom","right-top"];return l.styleable(b)(d=l.eventable(f)(d=l.stateable()(d=l.optionable({size:5,color:"#50bcb6",opacity:1,custom:!0,appendTo:"body",position:"top-left",templates:{bar:function(){return'<div class="{classes.BAR}"></div>'}}},!0)(d=l.register("scrollProgress",{methods:["enable","disable","destroy","refresh"]})(d=function(t){function l(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=h(this,c(l).call(this,t))).setupOptions(i),e.setupClasses(),e.setupStates(),e.initialize(),e}var d,b,m;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(l,t),d=l,(b=[{key:"initialize",value:function(){s.addClass(this.classes.NAMESPACE,this.element),this.$bar=r.query(".".concat(this.classes.BAR))?r.query(".".concat(this.classes.BAR)):r.parseHTML(this.creatHtml()),this.position=g.includes(this.options.position)?this.options.position:g[0],this.direction=this.getDirection(),this.resetBarPosition(),r.prepend(this.$bar,r.query(this.options.appendTo)),this.bind(),!0===this.options.custom&&this.initBar(),this.enter("initialized"),this.trigger(f.READY)}},{key:"setBardefaultAttr",value:function(){"vertical"===this.direction?n.setStyle({width:this.options.size,backgroundColor:this.options.color,opacity:this.options.opacity},this.$bar):n.setStyle({height:this.options.size,backgroundColor:this.options.color,opacity:this.options.opacity},this.$bar)}},{key:"resetBarPosition",value:function(){if(!s.hasClass(this.getClass("{namespace}-".concat(this.position)),this.$bar)){this.setBardefaultAttr();for(var t=0;t<g.length;t++)s.removeClass(this.getClass("{namespace}-".concat(g[t])),this.$bar);s.addClass(this.getClass("{namespace}-".concat(this.position)),this.$bar)}}},{key:"getDirection",value:function(){var t=this.position.split("-")[0];return"left"===t||"right"===t?"vertical":"level"}},{key:"scrollTop",value:function(){return window.pageYOffset||document.documentElement.scrollTop}},{key:"initBar",value:function(){var t=this.scrollTop(),e=document.documentElement.clientHeight,i=t/(document.body.scrollHeight-e)*100;this.setBarSize(i)}},{key:"setBarSize",value:function(t){"vertical"===this.direction?n.setStyle("height","".concat(t,"%"),this.$bar):n.setStyle("width","".concat(t,"%"),this.$bar)}},{key:"bind",value:function(){this.bindElement=this.options.custom?this.element:document.body,this.options.custom&&this.bindElement!==document.body?o.bindEvent(this.eventName("scroll"),this.scrollHandle.bind(this),this.bindElement):i.emitter.on(this.eventNameWithId("scroll"),this.scrollHandle.bind(this))}},{key:"unbind",value:function(){this.setBarSize(0),this.options.custom&&this.bindElement!==document.body?o.removeEvent(this.eventName(),this.bindElement):i.emitter.off(this.eventNameWithId("scroll"))}},{key:"scrollHandle",value:function(){if(!this.is("disabled")){var t,e,i;this.resetBarPosition(),!1===this.options.custom?(i=this.scrollTop(),t=document.documentElement.clientHeight,e=document.body.scrollHeight):(i=this.element.scrollTop,t=this.element.clientHeight,e=this.element.scrollHeight);var s=i/(e-t)*100;this.setBarSize(s)}}},{key:"creatHtml",value:function(){return e.render(this.options.templates.bar.call(this),{classes:this.classes})}},{key:"refresh",value:function(){this.scrollHandle(),this.trigger(f.REFRESH)}},{key:"enable",value:function(){this.is("disabled")&&(s.removeClass(this.classes.DISABLED,this.element),this.leave("disabled")),this.trigger(f.ENABLE)}},{key:"disable",value:function(){this.is("disabled")||(s.addClass(this.classes.DISABLED,this.element),this.enter("disabled")),this.trigger(f.DISABLE)}},{key:"destroy",value:function(){this.is("initialized")&&(this.unbind(),this.leave("initialized")),this.trigger(f.DESTROY),p(c(l.prototype),"destroy",this).call(this)}}])&&a(d.prototype,b),m&&a(d,m),l}(t))||d)||d)||d)||d)||d}));
